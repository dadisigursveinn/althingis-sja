library(tidyverse)
library(scales)
library(rvest)
library(lubridate)
library(readr)
install.packages(c("tidyverse", "scales", "rvest", "lubridate", "readr"))
library(tidyverse)
library(scales)
library(rvest)
library(lubridate)
library(readr)
install.packages(c('rio', 'tidyverse',
'rvest', 'lubridate'))
votes <- read_csv("../data/votes.csv")
library(tidyverse)
library(scales)
library(rvest)
library(lubridate)
library(readr)
votes <- read_csv("../data/votes.csv")
members <- read_csv("../data/members_details.csv") %>%
filter(congress >= 116) %>%
select(member_id, name, party_id, congress) %>%
distinct
members <- read_csv("../data/members_details.csv")
View(members)
members <- read_csv("../data/members_details.csv") %>%
filter(congress >= 116) %>%
select(member_id, name, party_id, congress) %>%
distinct
members <- read_csv("../data/members_details.csv") %>%
select(member_id, name, party_id, congress) %>%
distinct
library(tidyverse)
library(scales)
library(rvest)
library(lubridate)
library(readr)
install.packages("scales")
library(tidyverse)
library(scales)
library(rvest)
library(lubridate)
library(readr)
votes <- read_csv("../data/votes.csv")
members <- read_csv("../data/members_details.csv") %>%
filter(congress >= 116) %>%
select(member_id, name, party_id, congress) %>%
distinct
parties <- read_csv("../data/parties.csv", na="") %>%
select(party_id, party_name=name, abr=abr_long)
votes_member <- merge(merge(members, votes, by = "member_id"), parties, by="party_id")
votes_member %>%
mutate(vote_time_hour=ifelse((vote_time_hour == 0), 24, vote_time_hour)) %>%
ggplot() +
geom_bar(mapping = aes(x=vote_time_hour, fill=vote),
position="fill") +
scale_y_continuous(breaks = c(0, 0.25, 0.5, 0.75, 1), labels = scales::percent(c(0, 0.25, 0.5, 0.75, 1))) +
scale_x_continuous(breaks=seq(7,24,by=1))+
theme_bw()+
labs(
title = "How Members Vote Throughout the Day",
subtitle="Data for session 148.",
y = "",
x = "Time of Day",
fill = "Vote"
) +
scale_fill_manual(values = c('#999999',
'#666666',
'#F0E442',
'#009E73',
'#D55E00'))
library(tidyverse)
library(scales)
library(rvest)
library(lubridate)
library(readr)
votes121 <- read_csv("../data/votes/votes_121.csv")
votes122 <- read_csv("../data/votes/votes_122.csv")
votes123 <- read_csv("../data/votes/votes_123.csv")
votes124 <- read_csv("../data/votes/votes_124.csv")
votes125 <- read_csv("../data/votes/votes_125.csv")
votes126 <- read_csv("../data/votes/votes_126.csv")
votes127 <- read_csv("../data/votes/votes_127.csv")
votes128 <- read_csv("../data/votes/votes_128.csv")
votes129 <- read_csv("../data/votes/votes_129.csv")
votes130 <- read_csv("../data/votes/votes_130.csv")
votes131 <- read_csv("../data/votes/votes_131.csv")
votes132 <- read_csv("../data/votes/votes_132.csv")
votes133 <- read_csv("../data/votes/votes_133.csv")
votes134 <- read_csv("../data/votes/votes_134.csv")
votes135 <- read_csv("../data/votes/votes_135.csv")
votes136 <- read_csv("../data/votes/votes_136.csv")
votes137 <- read_csv("../data/votes/votes_137.csv")
votes138 <- read_csv("../data/votes/votes_138.csv")
votes139 <- read_csv("../data/votes/votes_139.csv")
votes140 <- read_csv("../data/votes/votes_140.csv")
votes141 <- read_csv("../data/votes/votes_141.csv")
votes142 <- read_csv("../data/votes/votes_142.csv")
votes143 <- read_csv("../data/votes/votes_143.csv")
votes144 <- read_csv("../data/votes/votes_144.csv")
votes145 <- read_csv("../data/votes/votes_145.csv")
votes146 <- read_csv("../data/votes/votes_146.csv")
votes147 <- read_csv("../data/votes/votes_147.csv")
votes148 <- read_csv("../data/votes/votes_148.csv")
View(votes)
ggplot() +
geom_dotplot(data = votes121)
ggplot() +
geom_dotplot(data = votes121, mapping = aes(x=vote))
ggplot() +
geom_bar(data = votes121, mapping = aes(x=vote))
merge(votes121, votes122)
merge(votes121, votes122, all=TRUE)
all_votes <- merge(votes121, votes122, all=TRUE)
Reduce(function(x,y) {merge(x,y)}, datalist)
multmerge = function(mypath){
filenames=list.files(path=mypath, full.names=TRUE)
datalist = lapply(filenames, function(x){read.csv(file=x,header=T)})
Reduce(function(x,y) {merge(x,y)}, datalist)
}
all_votes <- multmerge("../data/votes/")
all_votes <- multmerge("../data/votes/")
all_votes <- multmerge("../data/votes")
Reduce(merge, list(votes121,
votes122,
votes123,
votes124,
votes125,
votes126,
votes127,
votes128,
votes129,
votes130,
votes131,
votes132,
votes133,
votes134,
votes135,
votes136,
votes137,
votes138,
votes139,
votes140,
votes141,
votes142,
votes143,
votes144,
votes145,
votes146,
votes147,
votes148))
all_votes <- Reduce(merge, list(votes121,
votes122,
votes123,
votes124,
votes125,
votes126,
votes127,
votes128,
votes129,
votes130,
votes131,
votes132,
votes133,
votes134,
votes135,
votes136,
votes137,
votes138,
votes139,
votes140,
votes141,
votes142,
votes143,
votes144,
votes145,
votes146,
votes147,
votes148))
View(multmerge)
Reduce(function(x,y) {merge(x,y, all=TRUE)}, datalist)
multmerge = function(mypath){
filenames=list.files(path=mypath, full.names=TRUE)
datalist = lapply(filenames, function(x){read.csv(file=x,header=T)})
Reduce(function(x,y) {merge(x,y, all=TRUE)}, datalist)
}
all_votes <- multmerge("../data/votes")
View(all_votes)
View(votes121)
View(votes121)
View(all_votes)
View(votes139)
View(all_votes)
all_votes <- Reduce(function(x,y) merge(x,y, all=TRUE), list(votes121,
votes122,
votes123,
votes124,
votes125,
votes126,
votes127,
votes128,
votes129,
votes130,
votes131,
votes132,
votes133,
votes134,
votes135,
votes136,
votes137,
votes138,
votes139,
votes140,
votes141,
votes142,
votes143,
votes144,
votes145,
votes146,
votes147,
votes148))
View(all_votes)
all_votes %>%
ggplot() +
geom_bar(mapping = aes(x=vote_time_hour, fill=vote),
position="fill") +
scale_y_continuous(breaks = c(0, 0.25, 0.5, 0.75, 1), labels = scales::percent(c(0, 0.25, 0.5, 0.75, 1))) +
scale_x_continuous(breaks=seq(0,23,by=1))+
theme_bw()+
labs(
title = "How Members Vote Throughout the Day",
subtitle="Data for session 148.",
y = "",
x = "Time of Day",
fill = "Vote"
) +
scale_fill_manual(values = c('#999999',
'#666666',
'#F0E442',
'#009E73',
'#D55E00'))
all_votes %>%
ggplot() +
geom_bar(mapping = aes(x=vote_time_hour, fill=vote),
position="fill") +
scale_y_continuous(breaks = c(0, 0.25, 0.5, 0.75, 1), labels = scales::percent(c(0, 0.25, 0.5, 0.75, 1))) +
scale_x_continuous(breaks=seq(0,23,by=1))+
theme_bw()+
labs(
title = "How Members Vote Throughout the Day",
subtitle="Data for session 148.",
y = "",
x = "Time of Day",
fill = "Vote"
) +
scale_fill_manual(values = c('#999999',
'#666666',
'#F0E442',
'#009E73',
'#D55E00'))
all_votes %>%
ggplot() +
geom_bar(mapping = aes(x=vote_time_hour, fill=vote),
position="fill")
all_votes %>%
select(vote != "f. 'óþekktur kóði")
ggplot() +
geom_bar(mapping = aes(x=vote_time_hour, fill=vote),
position="fill") +
scale_y_continuous(breaks = c(0, 0.25, 0.5, 0.75, 1), labels = scales::percent(c(0, 0.25, 0.5, 0.75, 1)))
all_votes %>%
select(vote != "f. 'óþekktur kóði")
all_votes %>%
select(vote != "f. 'óþekktur kóði")
all_votes <- Reduce(function(x,y) merge(x,y, all=TRUE), list(votes121,
votes122,
votes123,
votes124,
votes125,
votes126,
votes127,
votes128,
votes129,
votes130,
votes131,
votes132,
votes133,
votes134,
votes135,
votes136,
votes137,
votes138,
votes139,
votes140,
votes141,
votes142,
votes143,
votes144,
votes145,
votes146,
votes147,
votes148))
all_votes %>%
select(vote != "f. 'óþekktur kóði") %>%
ggplot() +
geom_bar(mapping = aes(x=vote_time_hour, fill=vote),
position="fill") +
scale_y_continuous(breaks = c(0, 0.25, 0.5, 0.75, 1), labels = scales::percent(c(0, 0.25, 0.5, 0.75, 1))) +
scale_x_continuous(breaks=seq(0,23,by=1))+
theme_bw()+
labs(
title = "How Members Vote Throughout the Day",
subtitle="Data for session 148.",
y = "",
x = "Time of Day",
fill = "Vote"
) +
scale_fill_manual(values = c('#999999',
'#666666',
'#F0E442',
'#009E73',
'#D55E00'))
all_votes %>%
filter(vote != "f. 'óþekktur kóði") %>%
ggplot() +
geom_bar(mapping = aes(x=vote_time_hour, fill=vote),
position="fill") +
scale_y_continuous(breaks = c(0, 0.25, 0.5, 0.75, 1), labels = scales::percent(c(0, 0.25, 0.5, 0.75, 1))) +
scale_x_continuous(breaks=seq(0,23,by=1))+
theme_bw()+
labs(
title = "How Members Vote Throughout the Day",
subtitle="Data for session 148.",
y = "",
x = "Time of Day",
fill = "Vote"
) +
scale_fill_manual(values = c('#999999',
'#666666',
'#F0E442',
'#009E73',
'#D55E00'))
all_votes %>%
filter(vote != "f. 'óþekktur kóði") %>%
ggplot() +
geom_bar(mapping = aes(x=vote_time_hour, fill=vote),
position="fill")
all_votes %>%
filter(vote != "f. 'óþekktur kóði") %>%
ggplot() +
geom_bar(mapping = aes(x=vote_time_hour, fill=vote),
position="fill") +
scale_y_continuous(breaks = c(0, 0.25, 0.5, 0.75, 1), labels = scales::percent(c(0, 0.25, 0.5, 0.75, 1)))
all_votes %>%
filter(vote != "f. 'óþekktur kóði") %>%
ggplot() +
geom_bar(mapping = aes(x=vote_time_hour, fill=vote),
position="fill") +
scale_y_continuous(breaks = c(0, 0.25, 0.5, 0.75, 1), labels = scales::percent(c(0, 0.25, 0.5, 0.75, 1))) +
theme_bw()+
labs(
title = "How Members Vote Throughout the Day",
subtitle="Data for session 148.",
y = "",
x = "Time of Day",
fill = "Vote"
) +
scale_fill_manual(values = c('#999999',
'#992222',
'#666666',
'#F0E442',
'#009E73',
'#D55E00'))
